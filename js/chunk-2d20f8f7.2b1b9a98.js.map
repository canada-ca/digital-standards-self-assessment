{"version":3,"sources":["webpack:///./src/views/Results.vue?b458","webpack:///./src/components/ResultsCard.vue?b596","webpack:///./src/components/ResultRecommendations.vue?9a76","webpack:///./src/components/ResultRecommendations.vue","webpack:///./src/components/ResultRecommendations.vue?d2e6","webpack:///./src/components/ResultRecommendations.vue?3fb7","webpack:///./src/components/ResultsCard.vue","webpack:///./src/components/ResultsCard.vue?597f","webpack:///./src/components/ResultsCard.vue?021a","webpack:///./src/views/Results.vue","webpack:///./src/views/Results.vue?4ad9","webpack:///./src/views/Results.vue?a495"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$t","undefined","currentSection","attrs","sectionName","userScore","getMaxScore","myRecommendations","locale","staticStyle","on","$event","goToQuestions","key","$route","path","goToHomePage","staticRenderFns","getSectionName","thisSurveyData","sectionScoreLevel","maxScore","showRecommendation","_e","sectionRecommendations","_l","getRecommendation","title","item","id","domProps","markdownToHtml","ResultRecommendations","Vue","__decorate","Prop","Component","components","methods","scoreLevel","sectionRec","find","section","name","recommendations","parseInt","marked","component","ResultsCard","$store","getters","returnSurveyModel","computed","process","surveyData","page","getPageByName","Intl","NumberFormat","style","maximumFractionDigits","format","Results","myResults","resultsDataSections","Survey","Model","surveyJSON","$router","push","JSON","stringify","version","state","toolVersion","currentPage","currentPageNo","data","toolData","dataStr","buildSurveyFile","downloadAnchorNode","document","createElement","setAttribute","body","appendChild","click","remove","window","getElementById","$i18n","pageActions","getElementsByClassName","beforePrint","i","classList","add","afterPrint","addEventListener","print","removeEventListener","start","dispatch","ActionTypes","UpdateSurveyData","resultDataSections","value","oldValue","onComplete","result","onValueChanged","converter","showdown","Converter","onTextMarkdown","survey","options","str","makeHtml","text","substring","length","html","i18n","onAfterRenderQuestion","sender","welcomePage","getElementsByName","welcomePageElement","removeAttribute","inProgress","fileLoaded","Watch","sectionNames","returnSectionsNamesGenerated","results","sections","returnAllSections","returnCurrentSection","questions"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,KAAK,CAACJ,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIS,GAAG,+BAA+B,OAAOL,EAAG,MAAM,MAAyBM,IAAvBV,EAAIW,eAA8BP,EAAG,cAAc,CAACQ,MAAM,CAAC,QAAUZ,EAAIW,eAAe,eAAeX,EAAIW,eAAeE,YAAY,aAAab,EAAIW,eAAeG,UAAU,YAAYd,EAAIe,YAAYf,EAAIW,gBAAgB,qBAAqBX,EAAIgB,kBAAkB,OAAShB,EAAIiB,UAAUb,EAAG,MAAM,CAACA,EAAG,IAAI,CAACJ,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIS,GAAG,sBAAsB,UAAU,GAAGL,EAAG,KAAKA,EAAG,MAAM,CAACE,YAAY,0BAA0B,CAACF,EAAG,MAAM,CAACE,YAAY,MAAMY,YAAY,CAAC,QAAU,WAAW,CAACd,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,SAAS,CAACE,YAAY,kBAAkBY,YAAY,CAAC,MAAQ,WAAWN,MAAM,CAAC,KAAO,UAAUO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOpB,EAAIqB,mBAAmB,CAACrB,EAAIO,GAAG,MAAMP,EAAIQ,GAAGR,EAAIS,GAAG,sBAAsB,SAASL,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,SAAS,CAACkB,IAAItB,EAAIuB,OAAOC,KAAKlB,YAAY,kBAAkBY,YAAY,CAAC,MAAQ,WAAWN,MAAM,CAAC,KAAO,UAAUO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOpB,EAAIyB,kBAAkB,CAACzB,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIS,GAAG,oCAAoC,kBACzwCiB,EAAkB,G,qHCDlB,EAAS,WAAa,IAAI1B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACE,YAAY,QAAQ,CAACF,EAAG,gBAAgB,CAACE,YAAY,MAAM,CAACN,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAI2B,eAAe3B,EAAI4B,eAAgB5B,EAAIa,cAAc,OAAOT,EAAG,cAAc,CAACA,EAAG,IAAI,CAACE,YAAY,MAAM,CAACN,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIS,GAAG,wBAAwB,KAAKT,EAAIQ,GAAGR,EAAI6B,kBAAkB7B,EAAIc,UAAWd,EAAI8B,WAAW,QAAQ1B,EAAG,KAAOJ,EAAI+B,mBAAgO/B,EAAIgC,KAAhN5B,EAAG,wBAAwB,CAACQ,MAAM,CAAC,eAAeZ,EAAIa,YAAY,sBAAsBb,EAAI6B,kBAAkB,0BAA0B7B,EAAIgB,kBAAkBiB,uBAAuB,OAASjC,EAAIiB,WAAoB,IAAI,IACzpB,EAAkB,GCDlB,EAAS,WAAa,IAAIjB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,cAAcJ,EAAIkC,GAAIlC,EAAImC,kBAC/HnC,EAAIiC,uBACJjC,EAAIa,YACJ,KACAuB,MAAMpC,EAAIiB,SAAS,SAASoB,GAAM,OAAOjC,EAAG,MAAM,CAACkB,IAAIe,EAAKC,GAAGC,SAAS,CAAC,UAAYvC,EAAIQ,GAAGR,EAAIwC,eAAeH,UAAY,IAAI,IACnI,EAAkB,G,4CCqCDI,EAAqB,qJAASC,QACzCC,gBAAPC,kBAAO,6CACAD,gBAAPC,kBAAO,kCACAD,gBAAPC,kBAAO,wCACAD,gBAAPC,kBAAO,6BAJWH,EAAqB,gBAvBzCI,eAAU,CACTC,WAAY,CACVL,yBAEFM,QAAS,CAIPZ,kBAJO,SAKLF,EACApB,EACAmC,GAEA,IAAIC,EAAahB,EAAuBiB,MAAK,SAACC,GAC5C,OAAOA,EAAQC,MAAQvC,KAEzB,cAAOoC,QAAP,IAAOA,OAAP,EAAOA,EAAYI,gBAAgBC,SAASN,KAE9CR,eAdO,SAcQH,GACb,OAAOkB,oBAAOlB,QAICI,WC1Cma,I,YCOpbe,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,QC4BMC,EAAW,wDAAhC,iD,0BAME,EAAA7B,eAAiB,EAAK8B,OAAOC,QAAQC,kBANvC,EAAgC,0BAASlB,QAC/BC,gBAAPC,kBAAO,kCACAD,gBAAPC,kBAAO,gCACAD,gBAAPC,kBAAO,+BACAD,gBAAPC,kBAAO,wCACAD,gBAAPC,kBAAO,6BALWa,EAAW,gBAnB/BZ,eAAU,CACTC,WAAY,CAAEW,cAAahB,yBAC3BoB,SAAU,CACR9B,mBAAoB,iBAAM+B,UAE5Bf,QAAS,CACPpB,eADO,SACQoC,EAAyBlD,GAEtC,IAAImD,EAAOD,EAAWE,cAAcpD,GACpC,OAAOmD,EAAK5B,OAEdP,kBANO,SAMWf,EAAmBgB,GACnC,OAAO,IAAIoC,KAAKC,aAAa,QAAS,CACpCC,MAAO,UACPC,sBAAuB,IACtBC,OAAQxD,EAAYgB,EAAY,UAIpB2B,WC9CyZ,ICO1a,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,4CC4EMc,EAAO,wDAA5B,iD,0BAGE,EAAAC,UAAY,EAAKd,OAAOC,QAAQc,oBAEhC,EAAAC,OAAgB,IAAIC,WAAMC,GAL5B,EAA4B,mDAM1B,WACE3E,KAAK4E,QAAQC,KAAK,aAPM,4BAS1B,WACE7E,KAAK4E,QAAQC,KAAK,cAVM,2BAY1B,WACE7E,KAAK4E,QAAQC,KAAK,gBAbM,6BAe1B,WACE,OAAOC,KAAKC,UAAU,CACpB5B,KAAM,gBACN6B,QAAShF,KAAKyD,OAAOwB,MAAMC,YAC3BC,YAAanF,KAAKyD,OAAOwB,MAAMG,cAC/BC,KAAMrF,KAAKyD,OAAOwB,MAAMK,aApBF,kCAuB1B,WACE,IAAMC,EAAU,gCAAkCvF,KAAKwF,kBACnDC,EAAqBC,SAASC,cAAc,KAChDF,EAAmBG,aAAa,OAAQL,GACxCE,EAAmBG,aAAa,WAAY,eAC5CF,SAASG,KAAKC,YAAYL,GAC1BA,EAAmBM,QACnBN,EAAmBO,WA9BK,2BA2D1B,WACiBC,OAAOP,SAASQ,eAC7BlG,KAAKmG,MAAMnF,OAAS,YADtB,IAIIoF,EAAcH,OAAOP,SAASW,uBAAuB,gBAEzD,SAASC,IACP,IAAK,IAAIC,KAAKH,EACRA,EAAY/C,SAASkD,IAAIC,WAC3BJ,EAAY/C,SAASkD,IAAIC,UAAUC,IAAI,UAK7C,SAASC,IACP,IAAK,IAAIH,KAAKH,EACRA,EAAY/C,SAASkD,IAAIC,WAC3BJ,EAAY/C,SAASkD,IAAIC,UAAUR,OAAO,UAKhDC,OAAOU,iBAAiB,cAAeL,GAAa,GACpDL,OAAOU,iBAAiB,aAAcD,GAAY,GAElDT,OAAOW,QAEPX,OAAOY,oBAAoB,cAAeP,GAC1CL,OAAOY,oBAAoB,aAAcH,KAxFjB,wBAiG1B,SAAWvF,GACTnB,KAAKyE,OAAOY,KAAOlE,EAAOkE,KAC1BrF,KAAKyE,OAAOW,cAAgBjE,EAAOgE,YACnCnF,KAAKyE,OAAOqC,QAEZ9G,KAAKyD,OAAOsD,SAASC,OAAYC,iBAAkBjH,KAAKyE,QAExDzE,KAAKuE,UAAYvE,KAAKyD,OAAOC,QAAQwD,qBAxGb,4BA4G1B,SAAeC,EAAeC,GAC5BpH,KAAKyE,OAAOzD,OAASmG,EACrBnH,KAAKyE,OAAO3E,WA9GY,qBAiH1B,WAAO,WACLE,KAAKyE,OAAO4C,WAAWZ,KAAI,SAACa,GAE1B,EAAK7D,OAAOsD,SAASC,OAAYC,iBAAkBK,MAGrDtH,KAAKyE,OAAO8C,eAAed,KAAI,SAACa,GAE9B,EAAK7D,OAAOsD,SAASC,OAAYC,iBAAkBK,MAGrD,IAAME,EAAY,IAAIC,IAASC,UAE/B1H,KAAKyE,OAAOkD,eAAelB,KAAI,SAACmB,EAAaC,GAE3C,IAAIC,EAAMN,EAAUO,SAASF,EAAQG,MAErCF,EAAMA,EAAIG,UAAU,GACpBH,EAAMA,EAAIG,UAAU,EAAGH,EAAII,OAAS,GAEpCL,EAAQM,KAAOL,KAIjB9H,KAAKyE,OAAOzD,OAASoH,OAAKpH,OAI1BhB,KAAKyE,OAAO4D,sBAAsB5B,KAAI,SAAC6B,EAAaT,GAClD,IAAIU,EAAc7C,SAAS8C,kBAAkB,YAC7C,GAAID,GAAeA,EAAYL,OAAS,EAAG,CACzC,IAAIO,EAAqBF,EAAY,GACrCE,EAAmBC,gBAAgB,uBAKnC1I,KAAKyD,OAAOC,QAAQiF,YACtB3I,KAAK4I,WAAW,CACdzD,YAAanF,KAAKyD,OAAOwB,MAAMG,cAC/BC,KAAMrF,KAAKyD,OAAOwB,MAAMK,eAzJJ,GAAS7C,QAC3BC,gBAAPC,kBAAO,2BACAD,gBAAPC,kBAAO,8BA0GRD,gBADCmG,eAAM,iBACP,mCA5GmBvE,EAAO,gBA/B3B1B,eAAU,CACTC,WAAY,CACVW,eAEFI,SAAU,CAERkF,aAFQ,WAGN,OAAO9I,KAAKyD,OAAOC,QAAQqF,8BAE7BC,QALQ,WAMN,OAAOhJ,KAAKyD,OAAOC,QAAQc,qBAE7ByE,SARQ,WASN,OAAOjJ,KAAKyD,OAAOC,QAAQwF,mBAE7BxI,eAXQ,WAYN,OAAOV,KAAKyD,OAAOC,QAAQyF,sBAE7BpI,kBAdQ,WAeN,OAAOf,KAAKyD,OAAOwB,MAAM7B,iBAE3BpC,OAjBQ,WAkBN,OAAOhB,KAAKmG,MAAMnF,SAGtB8B,QAAS,CACPhC,YADO,SACKoC,GACV,OAAkC,EAA3BA,EAAQkG,UAAUlB,YAIV5D,WC9FqZ,ICOta,EAAY,eACd,EACAxE,EACA2B,GACA,EACA,KACA,KACA,MAIa,e","file":"js/chunk-2d20f8f7.2b1b9a98.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"results\"},[_c('h1',[_vm._v(\" \"+_vm._s(_vm.$t(\"survey.sectionResultsTitle\"))+\" \")]),_c('div',[(_vm.currentSection !== undefined)?_c('ResultsCard',{attrs:{\"section\":_vm.currentSection,\"section-name\":_vm.currentSection.sectionName,\"user-score\":_vm.currentSection.userScore,\"max-score\":_vm.getMaxScore(_vm.currentSection),\"my-recommendations\":_vm.myRecommendations,\"locale\":_vm.locale}}):_c('div',[_c('p',[_vm._v(\" \"+_vm._s(_vm.$t(\"notice.noProgress\"))+\" \")])])],1),_c('p'),_c('div',{staticClass:\"page-actions container\"},[_c('div',{staticClass:\"row\",staticStyle:{\"padding\":\"0 15px\"}},[_c('div',{staticClass:\"col-3 col-sm-2 col-md-3\"},[_c('button',{staticClass:\"btn btn-primary\",staticStyle:{\"width\":\"inherit\"},attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.goToQuestions()}}},[_vm._v(\" ⇠ \"+_vm._s(_vm.$t(\"navigation.goBack\"))+\" \")])]),_c('div',{staticClass:\"col-3 col-sm-2 col-md-3\"},[_c('button',{key:_vm.$route.path,staticClass:\"btn btn-default\",staticStyle:{\"width\":\"inherit\"},attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.goToHomePage()}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"navigation.chooseAnotherSection\"))+\" \")])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-card',{staticClass:\"mt-2\"},[_c('b-card-header',{staticClass:\"h3\"},[_vm._v(\" \"+_vm._s(_vm.getSectionName(_vm.thisSurveyData, _vm.sectionName))+\" \")]),_c('b-card-body',[_c('p',{staticClass:\"h5\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"survey.currentScore\"))+\": \"+_vm._s(_vm.sectionScoreLevel(_vm.userScore, _vm.maxScore))+\"% \")]),_c('p'),(!_vm.showRecommendation)?_c('ResultRecommendations',{attrs:{\"section-name\":_vm.sectionName,\"section-score-level\":_vm.sectionScoreLevel,\"section-recommendations\":_vm.myRecommendations.sectionRecommendations,\"locale\":_vm.locale}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-card-body',_vm._l((_vm.getRecommendation(\n        _vm.sectionRecommendations,\n        _vm.sectionName,\n        '0'\n      ).title[_vm.locale]),function(item){return _c('div',{key:item.id,domProps:{\"innerHTML\":_vm._s(_vm.markdownToHtml(item))}})}),0)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { SectionRecommendation } from \"@/types\";\nimport { marked } from \"marked\";\nimport { Vue, Component, Prop } from \"vue-property-decorator\";\n@Component({\n  components: {\n    ResultRecommendations\n  },\n  methods: {\n    /**\n     * Gets the recommendations based on the section name provided and the level achieved in the section\n     */\n    getRecommendation(\n      sectionRecommendations: SectionRecommendation[],\n      sectionName: string,\n      scoreLevel: string\n    ) {\n      let sectionRec = sectionRecommendations.find((section) => {\n        return section.name == sectionName;\n      });\n      return sectionRec?.recommendations[parseInt(scoreLevel)];\n    },\n    markdownToHtml(item: string) {\n      return marked(item);\n    }\n  }\n})\nexport default class ResultRecommendations extends Vue {\n  @Prop() public sectionRecommendations?: SectionRecommendation;\n  @Prop() public sectionName!: string;\n  @Prop() public sectionScoreLevel!: number;\n  @Prop() public locale!: any;\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResultRecommendations.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResultRecommendations.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ResultRecommendations.vue?vue&type=template&id=1473e129&\"\nimport script from \"./ResultRecommendations.vue?vue&type=script&lang=ts&\"\nexport * from \"./ResultRecommendations.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from \"vue-property-decorator\";\nimport { SurveyModel } from \"survey-vue\";\nimport { Recommendations } from \"@/types\";\nimport ResultRecommendations from \"@/components/ResultRecommendations.vue\";\n@Component({\n  components: { ResultsCard, ResultRecommendations },\n  computed: {\n    showRecommendation: () => process.env.VUE_APP_SHOW_RECOMMENDATION\n  },\n  methods: {\n    getSectionName(surveyData: SurveyModel, sectionName: string) {\n      //TODO: validate if surveyData is undefined\n      let page = surveyData.getPageByName(sectionName);\n      return page.title;\n    },\n    sectionScoreLevel(userScore: number, maxScore: number) {\n      return new Intl.NumberFormat(\"en-CA\", {\n        style: \"decimal\",\n        maximumFractionDigits: 0\n      }).format((userScore / maxScore) * 100);\n    }\n  }\n})\nexport default class ResultsCard extends Vue {\n  @Prop() public sectionName!: string;\n  @Prop() public userScore!: number;\n  @Prop() public maxScore!: number;\n  @Prop() public myRecommendations!: Recommendations;\n  @Prop() public locale!: any;\n  thisSurveyData = this.$store.getters.returnSurveyModel;\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResultsCard.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResultsCard.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ResultsCard.vue?vue&type=template&id=1d1abcee&\"\nimport script from \"./ResultsCard.vue?vue&type=script&lang=ts&\"\nexport * from \"./ResultsCard.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport { Model } from \"survey-vue\";\nimport showdown from \"showdown\";\nimport SurveyFile from \"@/interfaces/SurveyFile\";\nimport ResultsCard from \"@/components/ResultsCard.vue\";\nimport i18n from \"@/plugins/i18n\";\nimport surveyJSON from \"@/survey-enfr.json\";\nimport { Section } from \"@/types\";\nimport { ActionTypes } from \"@/store/actions\";\n\n@Component({\n  components: {\n    ResultsCard\n  },\n  computed: {\n    // TODO: This computed property is never used\n    sectionNames() {\n      return this.$store.getters.returnSectionsNamesGenerated;\n    },\n    results() {\n      return this.$store.getters.resultsDataSections;\n    },\n    sections() {\n      return this.$store.getters.returnAllSections;\n    },\n    currentSection() {\n      return this.$store.getters.returnCurrentSection;\n    },\n    myRecommendations() {\n      return this.$store.state.recommendations;\n    },\n    locale() {\n      return this.$i18n.locale;\n    }\n  },\n  methods: {\n    getMaxScore(section: Section) {\n      return section.questions.length * 5;\n    }\n  }\n})\nexport default class Results extends Vue {\n  @Prop() data: any;\n  @Prop() public section!: Section;\n  myResults = this.$store.getters.resultsDataSections;\n\n  Survey: Model = new Model(surveyJSON);\n  goToHomePage() {\n    this.$router.push(\"/survey\");\n  }\n  goToAllResults() {\n    this.$router.push(\"/Results\");\n  }\n  goToQuestions() {\n    this.$router.push(\"/Questions\");\n  }\n  buildSurveyFile(): string {\n    return JSON.stringify({\n      name: \"surveyResults\",\n      version: this.$store.state.toolVersion,\n      currentPage: this.$store.state.currentPageNo,\n      data: this.$store.state.toolData\n    });\n  }\n  downloadSurveyAnswer(): void {\n    const dataStr = \"data:text/json;charset=utf-8,\" + this.buildSurveyFile();\n    var downloadAnchorNode = document.createElement(\"a\");\n    downloadAnchorNode.setAttribute(\"href\", dataStr);\n    downloadAnchorNode.setAttribute(\"download\", \"result.json\");\n    document.body.appendChild(downloadAnchorNode); // required for firefox\n    downloadAnchorNode.click();\n    downloadAnchorNode.remove();\n  }\n  // async saveSurveyData(): Promise<boolean> {\n  //   var responseStatus: boolean = false;\n  //   const saveFile = this.buildSurveyFile();\n\n  //   var requestOptions = {\n  //     method: \"POST\",\n  //     headers: {\n  //       \"Content-Type\": \"application/text\"\n  //     },\n  //     mode: \"no-cors\" as RequestMode,\n  //     name: \"surveyData\",\n  //     body: saveFile\n  //   };\n  //   await fetch(\n  //     \"https://doraselfassessment.azurewebsites.net/api/saveselfassessment\",\n  //     requestOptions\n  //   ).then(function(response) {\n  //     if (response.status === 200) {\n  //       responseStatus = true;\n  //     }\n  //   });\n  //   return responseStatus;\n  // }\n\n  /**\n   * Export survey result.\n   */\n  exportResults() {\n    const source = window.document.getElementById(\n      this.$i18n.locale + \"-content\"\n    ) as HTMLElement;\n\n    let pageActions = window.document.getElementsByClassName(\"page-actions\");\n\n    function beforePrint() {\n      for (let i in pageActions) {\n        if (pageActions[parseInt(i)].classList) {\n          pageActions[parseInt(i)].classList.add(\"hidden\");\n        }\n      }\n    }\n\n    function afterPrint() {\n      for (let i in pageActions) {\n        if (pageActions[parseInt(i)].classList) {\n          pageActions[parseInt(i)].classList.remove(\"hidden\");\n        }\n      }\n    }\n\n    window.addEventListener(\"beforeprint\", beforePrint, false);\n    window.addEventListener(\"afterprint\", afterPrint, false);\n\n    window.print();\n\n    window.removeEventListener(\"beforeprint\", beforePrint);\n    window.removeEventListener(\"afterprint\", afterPrint);\n  }\n  // Feature disabled, will be removed from store actions\n  // startAgain() {\n  //   this.Survey.clear(true, true);\n  //   window.localStorage.clear();\n  //   this.$store.commit(\"resetSurvey\");\n  //   this.$router.push({ path: \"/\" });\n  // }\n  fileLoaded($event: SurveyFile) {\n    this.Survey.data = $event.data;\n    this.Survey.currentPageNo = $event.currentPage;\n    this.Survey.start();\n    // this.$store.commit(\"calculateResult\", this.Survey);\n    this.$store.dispatch(ActionTypes.UpdateSurveyData, this.Survey);\n\n    this.myResults = this.$store.getters.resultDataSections;\n  }\n\n  @Watch(\"$i18n.locale\")\n  changeLanguage(value: string, oldValue: string) {\n    this.Survey.locale = value;\n    this.Survey.render();\n  }\n\n  created() {\n    this.Survey.onComplete.add((result: any) => {\n      // this.$store.commit(\"updateSurveyData\", result);\n      this.$store.dispatch(ActionTypes.UpdateSurveyData, result);\n    });\n\n    this.Survey.onValueChanged.add((result: any) => {\n      // this.$store.commit(\"calculateResult\", result);\n      this.$store.dispatch(ActionTypes.UpdateSurveyData, result);\n    });\n\n    const converter = new showdown.Converter();\n\n    this.Survey.onTextMarkdown.add((survey: any, options: any) => {\n      //convert the markdown text to html\n      var str = converter.makeHtml(options.text);\n      //remove root paragraphs <p></p>\n      str = str.substring(3);\n      str = str.substring(0, str.length - 4);\n      //set html\n      options.html = str;\n    });\n\n    // Set locale\n    this.Survey.locale = i18n.locale;\n\n    // accessibility fix... aria-labelledby being needlessly generated for html question\n    // TODO: make this dynamic by looping over questions and doing this for all html questions\n    this.Survey.onAfterRenderQuestion.add((sender: any, options: any) => {\n      let welcomePage = document.getElementsByName(\"welcome1\");\n      if (welcomePage && welcomePage.length > 0) {\n        let welcomePageElement = welcomePage[0];\n        welcomePageElement.removeAttribute(\"aria-labelledby\");\n      }\n    });\n\n    //if survey is in progress reload from store\n    if (this.$store.getters.inProgress) {\n      this.fileLoaded({\n        currentPage: this.$store.state.currentPageNo,\n        data: this.$store.state.toolData\n      } as SurveyFile);\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Results.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Results.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Results.vue?vue&type=template&id=10c9602a&\"\nimport script from \"./Results.vue?vue&type=script&lang=ts&\"\nexport * from \"./Results.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}